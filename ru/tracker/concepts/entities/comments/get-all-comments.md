---
sourcePath: ru/tracker/api-ref/concepts/entities/comments/get-all-comments.md
---
# Получить комментарии к сущности

Запрос позволяет получить список комментариев к [сущности](../about-entities.md).

## Формат запроса {#query}

Перед выполнением запроса [получите доступ к API](../../access.md).

Для получения комментариев используйте HTTP-запрос с методом `GET`.

```json
GET /{{ ver }}/entities/<entityType>/<id>/comments
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
{{ org-id }}
```

{% include [headings](../../../../_includes/tracker/api/headings.md) %}

{% include [resource](../../../../_includes/tracker/api/resource-entity.md) %}

{% cut "Параметры запроса" %}

**Дополнительные параметры**

Параметр | Описание | Тип данных
-------- | -------- | ----------
expand | Дополнительная информация, которая будет включена в ответ: <ul><li>`all` — все;</li><li>`html` — HTML-разметка комментария;</li><li>`attachments` — вложенные файлы;</li><li>`reactions` — реакции на комментарий.</li></ul> | Строка

{% endcut %}

> Пример: Получить список комментариев
>
> - Используется HTTP-метод GET.
> - В ответе выводится информация о всех комментариях.
>
> ```
> GET /v2/entities/project/6586d6fee2b9ef74********/comments?expand=all
> Host: {{ host }}
> Authorization: OAuth <OAuth-токен>
> {{ org-id }}
> ```

## Формат ответа {#answer}

{% list tabs %}

- Запрос выполнен успешно

  {% include [answer-200](../../../../_includes/tracker/api/answer-200.md) %}

  Тело ответа содержит информацию о комментариях сущности в формате JSON.

  ```json
  [
      {
          "self": "{{ host }}/v2/entities/project/6586d6fee2b9ef74********/comments/15", 
          "id": 15, 
          "longId": "65a156a29d5d2000********",
          "text": "Комментарий **номер один.**",
          "textHtml": "<p>Комментарий <strong>номер один.</strong></p>\n",
          "attachments": [
              {
                  "self": "{{ host }}/v2/entities/project/6586d6fee2b9ef74********/attachments/25", 
                  "id": "25", 
                  "display": "image.jpg"
              }
          ], 
          "createdBy": {
              "self": "{{ host }}/v2/users/1990********",
              "id": "id_сотрудника",
              "display": "Имя_Фамилия",
              "cloudUid": "ajeppa7dgp53********",
              "passportUid": "15********"
          },
          "updatedBy": {
              "self": "{{ host }}/v2/users/1990********",
              "id": "id_сотрудника",
              "display": "Имя_Фамилия",
              "cloudUid": "ajeppa7dgp53********",
              "passportUid": "15********"
          },
          "createdAt": "2024-01-12T15:11:30.278+0000", 
          "updatedAt": "2024-01-12T16:33:35.988+0000", 
          "usersReacted": {
              "like": [
                  {
                      "self": "{{ host }}/v2/users/1993********",
                      "id": "id_сотрудника",
                      "display": "Имя_Фамилия",
                      "cloudUid": "ajeppa7dgp71********",
                      "passportUid": "16********"
                  }
              ]
          }, 
          "ownReactions": ["like"], 
          "summonees": [
              {
                  "self": "{{ host }}/v2/users/1972********",
                  "id": "id_сотрудника",
                  "display": "Имя_Фамилия",
                  "cloudUid": "ajeppa7dgp32********",
                  "passportUid": "12********"
              }
          ],
          "version": 3, 
          "type": "standard", 
          "transport": "internal"
      }
  ]
  ```


  {% cut "Параметры ответа" %}

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на объект комментария. | Строка
  id | Идентификатор комментария. | Число
  longId | Идентификатор комментария в виде строки. | Строка
  text | Текст комментария. | Строка
  textHtml | HTML-разметка комментария. | Строка
  attachments | Вложения. | Строка
  [createdBy](#created-by) | Объект с информацией о создателе комментария. | Объект
  [updatedBy](#updated-by) | Объект с информацией о сотруднике, внесшем последнее изменение в комментарий. | Объект
  createdAt | Дата и время создания комментария в формате:<br/>``` YYYY-MM-DDThh:mm:ss.sss±hhmm ```. | Строка
  updatedAt | Дата и время обновления комментария в формате:<br/>``` YYYY-MM-DDThh:mm:ss.sss±hhmm ```. | Строка
  [usersReacted](#users-reacted) | Реакции пользователей (присутствует в ответе, если в запросе для параметра `expand` указано значение `all` или `reactions`):<ul><li>`like`;</li><li>`dislike`;</li><li>`laugh`;</li><li>`tada`;</li><li>`hooray`;</li><li>`confused`;</li><li>`heart`;</li><li>`rocket`;</li><li>`eyes`;</li><li>`fire`;</li><li>`ok`;</li><li>`facepalm`;</li><li>`check`.</li></ul> | Объект со списком реакций и отреагировавших
  reactionsCount | Количество реакций (присутствует в ответе, если в запросе для параметра `expand` не указано значение `all` или `reactions`). | Объект со списком и количеством реакций
  ownReactions | Реакции автора комментария:<ul><li>`like`;</li><li>`dislike`;</li><li>`laugh`;</li><li>`tada`;</li><li>`hooray`;</li><li>`confused`;</li><li>`heart`;</li><li>`rocket`;</li><li>`eyes`;</li><li>`fire`;</li><li>`ok`;</li><li>`facepalm`;</li><li>`check`.</li></ul> | Список строк
  summonees | Идентификаторы или логины призванных пользователей. | Массив объектов или строк
  maillistSummonees | Список рассылок, призванных в комментарии. | Массив строк
  version | Версия комментария. Каждое изменение комментария увеличивает номер версии. | Число
  type | Тип комментария:<ul><li>`standart` — отправлен через интерфейс {{ tracker-name }};</li><li>`incoming` — создан из входящего письма;</li><li>`outcoming` — создан из исходящего письма.</li></ul> | Строка
  transport | Способ добавления комментария:<ul><li>`internal` — через интерфейс {{ tracker-name }};</li><li>`email` — через письмо.</li></ul> | Строка

  **Поля объекта** `createdBy` {#created-by}

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о пользователе. | Строка
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка
  cloudUid | Уникальный идентификатор пользователя в {{ org-full-name }}. | Строка
  passportUid | Уникальный идентификатор аккаунта пользователя в организации {{ ya-360 }} и Яндекс ID. | Строка
        
  **Поля объекта** `updatedBy` {#updated-by}

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о пользователе. | Строка
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка
  cloudUid | Уникальный идентификатор пользователя в {{ org-full-name }}. | Строка
  passportUid | Уникальный идентификатор аккаунта пользователя в организации {{ ya-360 }} и Яндекс ID. | Строка
        
  **Поля объекта** `usersReacted` {#users-reacted}

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о пользователе. | Строка
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка
  cloudUid | Уникальный идентификатор пользователя в {{ org-full-name }}. | Строка
  passportUid | Уникальный идентификатор аккаунта пользователя в организации {{ ya-360 }} и Яндекс ID. | Строка

  {% endcut %}  
  
- Запрос выполнен с ошибкой

  Если запрос не был успешно обработан, API возвращает ответ с кодом ошибки:

  {% include [error-400](../../../../_includes/tracker/api/answer-error-400.md) %}
  
  {% include [error-404](../../../../_includes/tracker/api/answer-error-404.md) %}
  
  {% include [error-422](../../../../_includes/tracker/api/answer-error-422.md) %}

{% endlist %}

## Постраничное отображение комментариев к сущности {#pagination}

Для постраничного отображения результатов используйте HTTP-запрос с методом `GET`.

```json
GET /{{ ver }}/entities/<entityType>/<id>/comments/_relative
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
{{ org-id }}
```

В строке запроса укажите дополнительные параметры:

#|
|| **Параметр** | **Описание** | **Тип данных** ||
|| perPage | Определяет максимальное количество комментариев в ответе. Значение по умолчанию — 50 | Число ||
|| from | Идентификатор комментария, после которого начинает формироваться список. Сам комментарий в список не включается. Не используется вместе с параметром `selected`. | Строка ||
|| selected | Идентификатор комментария, вокруг которого формируется список. Не указывается вместе с параметром `from`. Список формируется в следующем порядке (для `perPage=5`): 
1. Комментарий с указанным идентификатором.
2. Комментарий, предшествующий первому комментарию.
3. Комментарий, следующий за первым комментарием.
4. Комментарий, предшествующий второму комментарию.
5. Комментарий, следующий за третьим комментарием. | Строка ||
|| newCommentsOnTop | Меняет порядок комментариев в списке на противоположный. Значение по умолчанию — `false`. | Логический ||
|| direction | Определяет порядок комментариев в списке:
* `forward` (по умолчанию);
* `backward` — инвертирует значение параметра `newCommentsOnTop`. | Строка ||
|#

Если параметры не указаны, выводится полный список сущностей.

> Пример: Получить список комментариев
>
> - Используется HTTP-метод GET.
> - В ответе выводится информация о трех комментариях, начиная с `65a1bdb02b780b31********`.
>
> ```
> GET /v2/entities/project/6586d6fee2b9ef74********/comments/_relative?perPage=3&from=65a1bdb02b780b31********
> Host: {{ host }}
> Authorization: OAuth <OAuth-токен>
> {{ org-id }}
> ```

## Формат ответа с постраничным отображением комментариев {#answer-pagination}

{% list tabs %}

- Запрос выполнен успешно

  {% include [answer-200](../../../../_includes/tracker/api/answer-200.md) %}

  Тело ответа содержит информацию о комментариях сущности в формате JSON.

  ```json
  {
      "comments": [
          {
              "self": "{{ host }}/v2/entities/project/65a1bdb02b780b31********/comments/22", 
              "id": 22, 
              "longId": "65a1bdb02b780b31********", 
              "text": "Предыдущий комментарий.",
              ...
          }, 
          {
              "self": "{{ host }}/v2/entities/project/65a1bdb02b780b32********/comments/23", 
              "id": 23, 
              "longId": "65a1bdb02b780b32********", 
              "text": "Указанный комментарий.", 
              ...
          }, 
          {
              "self": "{{ host }}/v2/entities/project/65a1bdb02b780b33********/comments/24", 
              "id": 24, 
              "longId": "65a1bdb02b780b33********", 
              "text": "Следующий комментарий.", 
              ...
          }
      ], 
      "hasNext": True, 
      "hasPrev": True
  }
  ```


  {% cut "Параметры ответа" %}

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  comments | Список комментариев. | Список объектов
  hasNext | Указывает на наличие последующих записей в списке. | Логический
  hasPrev | Указывает на наличие предыдущих записей в списке. | Логический

  {% endcut %}  
  
- Запрос выполнен с ошибкой

  Если запрос не был успешно обработан, API возвращает ответ с кодом ошибки:

  {% include [error-400](../../../../_includes/tracker/api/answer-error-400.md) %}
  
  {% include [error-404](../../../../_includes/tracker/api/answer-error-404.md) %}
  
  {% include [error-422](../../../../_includes/tracker/api/answer-error-422.md) %}

{% endlist %}